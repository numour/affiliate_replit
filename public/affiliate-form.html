<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Numour Affiliate Registration</title>
  <style>
    :root {
      --primary: #6a4c93;
      --primary-hover: #5a3d83;
      --blue: #3b82f6;
      --blue-hover: #2563eb;
      --success: #4caf50;
      --danger: #e53935;
      --background: #f9f9f9;
      --card: #ffffff;
      --text: #333333;
      --border: #e0e0e0;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: #f8f4ff;
      color: var(--text);
      line-height: 1.6;
    }
    
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .header h1 {
      color: var(--primary);
      margin-bottom: 10px;
    }
    
    .header p {
      color: #666;
    }
    
    .card {
      background: var(--card);
      border-radius: 8px;
      box-shadow: 0 2px 15px rgba(0,0,0,0.1);
      padding: 30px;
      margin-bottom: 30px;
    }
    
    .progress-container {
      margin-bottom: 30px;
    }
    
    .progress-bar {
      display: flex;
      justify-content: space-between;
      position: relative;
      margin-bottom: 30px;
      max-width: 500px;
      margin: 0 auto;
    }
    
    .progress-bar::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
      height: 4px;
      width: 100%;
      background-color: #e0e0e0;
      z-index: 1;
    }
    
    .progress-bar-fill {
      position: absolute;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
      height: 4px;
      background-color: var(--primary);
      z-index: 2;
      transition: width 0.3s ease;
    }
    
    .step {
      width: 30px;
      height: 30px;
      background-color: white;
      border: 3px solid #e0e0e0;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: #999;
      position: relative;
      z-index: 3;
    }
    
    .step.active {
      border-color: var(--primary);
      color: var(--primary);
    }
    
    .step.completed {
      background-color: var(--primary);
      border-color: var(--primary);
      color: white;
    }
    
    form {
      margin-top: 20px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    input, textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 4px;
      font-size: 16px;
      transition: border 0.3s;
    }
    
    input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    .error {
      color: var(--danger);
      font-size: 14px;
      margin-top: 5px;
    }
    
    .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }
    
    button {
      padding: 12px 24px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s;
    }
    
    button.primary {
      background-color: var(--blue);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 15px 24px;
      font-size: 16px;
      border-radius: 10px;
    }
    
    button.primary:hover {
      background-color: var(--blue-hover);
    }
    
    button.secondary {
      background-color: #f5f5f5;
      color: #333;
    }
    
    button.secondary:hover {
      background-color: #e5e5e5;
    }
    
    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .success-message {
      text-align: center;
      padding: 30px;
    }
    
    .success-message h2 {
      color: var(--primary);
      margin-bottom: 20px;
    }
    
    .success-message .icon {
      font-size: 60px;
      color: var(--success);
      margin-bottom: 20px;
    }
    
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo-container">
        <svg width="120" height="80" viewBox="0 0 563 177" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M363.551 42.3037H385.481V133.636H363.551V42.3037Z" fill="#171717"/>
          <path d="M452.373 41.3037C451.813 41.3037 415.664 41.3037 415.664 41.3037V133.636H437.594V95.6107H452.373C478.467 95.6107 494.362 80.3933 494.362 68.4572C494.362 56.5211 479.027 41.3037 452.373 41.3037ZM452.373 73.6812H437.594V63.2331H452.373C458.772 63.2331 468.269 64.7936 468.269 68.4572C468.269 72.1207 458.772 73.6812 452.373 73.6812Z" fill="#171717"/>
          <path d="M563 41.3037H535.791V133.636H557.721V89.3265C557.721 82.4818 562.44 75.2419 574.897 75.2419C574.897 75.2419 574.897 41.3037 563 41.3037Z" fill="#171717"/>
          <path d="M506.538 41.3037H528.468V133.636H506.538V41.3037Z" fill="#171717"/>
          <path d="M307.267 41.3037H285.338V133.636H307.267V95.6108H339.059V73.6812H307.267V41.3037Z" fill="#171717"/>
          <path d="M271.678 63.2334C271.678 63.2334 255.223 41.3037 226.898 41.3037C198.573 41.3037 176.644 63.2334 176.644 87.4842C176.644 111.735 198.573 133.636 226.898 133.636C255.223 133.636 271.678 111.735 271.678 87.4842V63.2334ZM226.898 111.735C210.45 111.735 198.573 101.276 198.573 87.4842C198.573 73.6812 210.45 63.2334 226.898 63.2334C243.345 63.2334 249.773 73.6812 249.773 83.0461V91.9472C249.773 101.276 243.345 111.735 226.898 111.735Z" fill="#171717"/>
          <path d="M101.608 0C103.848 0 106.088 2.24011 106.088 4.48022V64.3839C106.088 77.6212 95.7271 87.5137 84.0415 87.5137C72.3558 87.5137 61.995 77.6212 61.995 64.3839V33.6017C61.995 31.3616 59.7547 29.1214 57.5144 29.1214C55.274 29.1214 53.0337 31.3616 53.0337 33.6017V64.3839C53.0337 77.6212 42.673 87.5137 30.9874 87.5137C19.3017 87.5137 8.94095 77.6212 8.94095 64.3839V4.48022C8.94095 2.24011 6.70084 0 4.48022 0C2.24011 0 0 2.24011 0 4.48022V64.3839C0 82.5841 13.7939 96.3976 30.9874 96.3976C41.7916 96.3976 51.2708 91.4448 57.5144 83.9223C63.758 91.4448 73.2371 96.3976 84.0415 96.3976C101.235 96.3976 115.029 82.5841 115.029 64.3839V4.48022C115.029 2.24011 112.789 0 110.549 0" fill="#C2B1DF"/>
          <path d="M91.2236 176.747C127.273 176.747 156.525 147.495 156.525 111.446C156.525 108.771 153.85 106.965 151.175 106.965C149.37 106.965 147.564 108.771 147.564 111.446C147.564 142.12 122.792 166.892 91.2236 166.892C59.6556 166.892 34.8835 142.12 34.8835 111.446C34.8835 109.672 34.8835 107.871 35.3097 105.208C35.7632 102.532 33.952 99.8504 31.303 99.3896C28.6538 98.936 25.9721 100.747 25.5186 103.403C24.6234 106.965 24.1698 110.098 24.1698 111.446C24.1698 147.495 53.4214 176.747 91.2236 176.747" fill="#C2B1DF"/>
        </svg>
      </div>
      <h1>Join the Numour Family üíú</h1>
    </div>
    
    <div id="form-container" class="card">
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-bar-fill" id="progress-fill" style="width: 0%"></div>
          <div class="step active" id="step-1">1</div>
          <div class="step" id="step-2">2</div>
        </div>
      </div>
      
      <div class="info-section" style="margin-bottom: 30px;">
        <h2 style="margin-bottom: 15px; font-size: 1.25rem;">Here's a little about what this journey with us will look like:</h2>
        
        <div class="benefit-item" style="margin-bottom: 15px; display: flex; align-items: flex-start;">
          <span style="margin-right: 10px; font-size: 1.25rem;">‚ú®</span>
          <p>You'll be more than a creator ‚Äî you'll be our ambassador, our muse, and the voice of a brand that's redefining skincare in India.</p>
        </div>
        
        <div class="benefit-item" style="margin-bottom: 15px; display: flex; align-items: flex-start;">
          <span style="margin-right: 10px; font-size: 1.25rem;">üå±</span>
          <p>We're still growing ‚Äî building every formula, every box, every word with care and intention.</p>
        </div>
        
        <div class="benefit-item" style="margin-bottom: 15px; display: flex; align-items: flex-start;">
          <span style="margin-right: 10px; font-size: 1.25rem;">üì¨</span>
          <p>We'd love to collaborate on a barter basis for now, with 1-year ad rights, because we're still small ‚Äî but everything we send is packed with so much love.</p>
        </div>
        
        <div class="benefit-item" style="margin-bottom: 15px; display: flex; align-items: flex-start;">
          <span style="margin-right: 10px; font-size: 1.25rem;">ü§ù</span>
          <p>We've set up one of the most generous affiliate models in the space ‚Äî not just to reward effort, but because we believe you deserve more.</p>
        </div>
        
        <div class="benefit-item" style="margin-bottom: 15px; display: flex; align-items: flex-start;">
          <span style="margin-right: 10px; font-size: 1.25rem;">üí´</span>
          <p>Above all, this isn't a transaction ‚Äî it's a relationship. One built on trust, creativity, and a shared dream to create something beautiful together.</p>
        </div>
      </div>
      
      <div id="step-one-form">
        <h2>Personal Information</h2>
        <p>Let's get to know you better! üòä</p>
        
        <form id="form-step-one">
          <div class="form-group">
            <label for="name">Full Name</label>
            <input type="text" id="name" name="name" placeholder="Enter your full name" required>
            <div id="name-error" class="error"></div>
          </div>
          
          <div class="form-group">
            <label for="instagram">Instagram Handle (e.g. @username)</label>
            <input type="text" id="instagram" name="instagram" placeholder="Enter your Instagram handle" required>
            <div id="instagram-error" class="error"></div>
          </div>
          
          <div class="button-group">
            <div></div> <!-- Empty div for spacing -->
            <button type="button" id="next-button" class="primary">Next Step</button>
          </div>
        </form>
      </div>
      
      <div id="step-two-form" class="hidden">
        <h2>Your Contact Information</h2>
        <p>Almost there! We need a few more details üìù</p>
        
        <form id="form-step-two">
          <div class="form-group">
            <label for="phone">Contact Number</label>
            <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required>
            <div id="phone-error" class="error"></div>
          </div>
          
          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" name="email" placeholder="Enter your email address" required>
            <div id="email-error" class="error"></div>
          </div>
          
          <div class="form-group">
            <label for="address">Shipping Address</label>
            <textarea id="address" name="address" rows="3" placeholder="Enter your complete shipping address" required></textarea>
            <div id="address-error" class="error"></div>
          </div>
          
          <div class="button-group">
            <button type="button" id="prev-button" class="secondary">Previous Step</button>
            <button type="submit" id="submit-button" class="primary">Submit Application</button>
          </div>
        </form>
      </div>
    </div>
    
    <div id="success-message" class="card success-message hidden">
      <div class="icon">‚úÖ</div>
      <h2>Application Submitted Successfully!</h2>
      <p>Thank you for joining the Numour family, <span id="user-name"></span>! üéâ</p>
      <p>We've sent a confirmation email to your inbox. Our team will review your application and get back to you soon.</p>
      <p>In the meantime, feel free to explore our product range and get familiar with what we offer.</p>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // DOM Elements
      const stepOneForm = document.getElementById('step-one-form');
      const stepTwoForm = document.getElementById('step-two-form');
      const successMessage = document.getElementById('success-message');
      const nextButton = document.getElementById('next-button');
      const prevButton = document.getElementById('prev-button');
      const submitButton = document.getElementById('submit-button');
      const progressFill = document.getElementById('progress-fill');
      const stepOne = document.getElementById('step-1');
      const stepTwo = document.getElementById('step-2');
      const userName = document.getElementById('user-name');
      
      // Form data
      let formData = {
        name: '',
        email: '',
        instagram: '',
        phone: '',
        address: ''
      };
      
      // Validation functions - matching our Zod schema rules
      function validateName(name) {
        return name.length >= 2;
      }
      
      function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
      }
      
      function validateInstagram(instagram) {
        if (instagram.length < 2) return false;
        // Check if Instagram handle starts with @
        return instagram.startsWith('@');
      }
      
      function validatePhone(phone) {
        if (phone.length < 10) return false;
        // Check if phone contains only digits
        return /^\d+$/.test(phone);
      }
      
      function validateAddress(address) {
        return address.length >= 10;
      }
      
      // Event listeners
      nextButton.addEventListener('click', function() {
        // Get form values
        const name = document.getElementById('name').value.trim();
        const instagram = document.getElementById('instagram').value.trim();
        
        // Clear previous errors
        document.getElementById('name-error').textContent = '';
        document.getElementById('instagram-error').textContent = '';
        
        // Validate form
        let isValid = true;
        
        if (!validateName(name)) {
          document.getElementById('name-error').textContent = 'Name must be at least 2 characters';
          isValid = false;
        }
        
        if (!validateInstagram(instagram)) {
          document.getElementById('instagram-error').textContent = 'Instagram handle should start with @';
          isValid = false;
        }
        
        if (isValid) {
          // Update form data
          formData.name = name;
          formData.instagram = instagram;
          
          // Move to step 2
          stepOneForm.classList.add('hidden');
          stepTwoForm.classList.remove('hidden');
          
          // Update progress bar
          progressFill.style.width = '50%';
          stepOne.classList.remove('active');
          stepOne.classList.add('completed');
          stepTwo.classList.add('active');
        }
      });
      
      prevButton.addEventListener('click', function() {
        // Move back to step 1
        stepTwoForm.classList.add('hidden');
        stepOneForm.classList.remove('hidden');
        
        // Update progress bar
        progressFill.style.width = '0%';
        stepTwo.classList.remove('active');
        stepOne.classList.remove('completed');
        stepOne.classList.add('active');
      });
      
      document.getElementById('form-step-two').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get form values
        const phone = document.getElementById('phone').value.trim();
        const email = document.getElementById('email').value.trim();
        const address = document.getElementById('address').value.trim();
        
        // Clear previous errors
        document.getElementById('phone-error').textContent = '';
        document.getElementById('email-error').textContent = '';
        document.getElementById('address-error').textContent = '';
        
        // Validate form
        let isValid = true;
        
        if (!validatePhone(phone)) {
          document.getElementById('phone-error').textContent = 'Phone number must be at least 10 digits and contain only numbers';
          isValid = false;
        }
        
        if (!validateEmail(email)) {
          document.getElementById('email-error').textContent = 'Please enter a valid email address';
          isValid = false;
        }
        
        if (!validateAddress(address)) {
          document.getElementById('address-error').textContent = 'Please provide a complete address (at least 10 characters)';
          isValid = false;
        }
        
        if (isValid) {
          // Update form data
          formData.phone = phone;
          formData.email = email;
          formData.address = address;
          
          // Disable submit button and show loading state
          submitButton.disabled = true;
          submitButton.textContent = 'Submitting...';
          
          // Send data to the API
          fetch('/api/affiliates', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(formData)
          })
          .then(response => {
            if (!response.ok) {
              throw new Error('Network response was not ok');
            }
            return response.json();
          })
          .then(data => {
            console.log('Success:', data);
            
            // Update progress bar to 100%
            progressFill.style.width = '100%';
            stepTwo.classList.remove('active');
            stepTwo.classList.add('completed');
            
            // Show success message
            document.getElementById('form-container').classList.add('hidden');
            successMessage.classList.remove('hidden');
            userName.textContent = formData.name;
          })
          .catch(error => {
            console.error('Error:', error);
            alert('There was an error submitting your application. Please try again later.');
            submitButton.disabled = false;
            submitButton.textContent = 'Submit Application';
          });
        }
      });
    });
  </script>
</body>
</html>